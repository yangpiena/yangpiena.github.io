---
title: Linux命令学习
date: 2016-11-22 15:02:51
categories: 技术
tags: [Linux, 命令]
---
## 基础命令
### 系统
| 命令                                         | 说明                                                                       |
| ---------------                              | :---------------                                                           |
| reboot                                       | 重启系统                                                                   |
| shutdown -r now                              | 重启系统                                                                   |
| shutdown -c                                  | 取消重启                                                                   |
| halt                                         | 立刻关机                                                                   |
| poweroff                                     | 立刻关机                                                                   |
| shutdown -h now                              | 立刻关机（root用户使用）                                                   |
| shutdown -h 10                               | 10分钟后自动关机                                                           |
| yum update                                   | 升级Linux，升级所有包同时也升级软件和系统内核                              |
| yum upgrade                                  | 升级Linux，只升级所有包，不升级软件和系统内核                              |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| cat /proc/version                            | 查看内核版本                                                               |
| uname -a                                     | 查看内核版本                                                               |
| lsb_release -a                               | 查看系统版本                                                               |
| cat /etc/issue                               | 查看系统版本                                                               |
| cat /etc/redhat-release                      | 查看系统版本（只适合Redhat系）                                             |
| getconf LONG_BIT                             | 查看系统位数                                                               |
| cat /proc/cpuinfo                            | 查看CPU型号                                                                |
| top                                          | 查看实时CPU使用率                                                          |
| ps aux|head -1;ps aux|grep -v PID|sort -rn -k +3|head | 查看占用CPU最多的10个进程。head默认取前10行，自定义K行时，在后面跟-K即可 |
| free -m                                      | 查看内存                                                                   |
| ps aux|head -1;ps aux|grep -v PID|sort -rn -k +4|head | 查看占用内存最多的10个进程。head默认取前10行，自定义K行时，在后面跟-K即可 |
| df -l                                        | 查看硬盘空间情况                                                           |
| du -sh ./*                                   | 查看当前目录下各文件/文件夹的大小                                          |
| jps                                          | 查看当前所有Java进程pid的命令                                              |
| kill                                         | 删除执行中的程序或工作                                                     |
| kill -9                                      | 强制终止执行中的程序或工作                                                 |

<!-- more -->

---

### 文件
| 命令                                         | 说明                                                                       |
| ---------------                              | :---------------                                                           |
| cd                                           | 改变目录到                                                                 |
| cd ~                                         | 回到家目录                                                                 |
| pwd                                          | 查看当前路径                                                               |
| mkdir                                        | 创建文件夹                                                                 |
| touch                                        | 创建文件                                                                   |
| rm                                           | 删除文件                                                                   |
| rm -r                                        | 删除文件夹                                                                 |
| rm -fr                                       | 直接删除，无需确认                                                         |
| cp                                           | 复制                                                                       |
| mv                                           | 移动                                                                       |
| find                                         | 查找                                                                       |
| which                                        | 查找                                                                       |
| cat                                          | 查看文本内容                                                               |
| head                                         | 查看文本前十行                                                             |
| tail                                         | 查看文本后十行                                                             |
| more                                         | 让文件内容一屏一屏的显示                                                   |
| cat XXX &#124; more                          | 管道：将cat显示出来的内容重新输出给more命令                                |
| >                                            | 重定向：将文件内容输出到指定的文件或位置。如cat /etc/services > a.txt      |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| ls -i                                        | 使用ls -i命令找到文件或文件夹的节点编号                                    |
| find -inum 2243223 -delete                   | 使用find命令查询并且删除乱码文件或文件夹                                   |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| rm -rf fileA                                 | 删除文件或文件夹fileA的软链接                                              |
| ln -s fileB fileA                            | 设置软链接用快捷方式fileB代替fileA                                         |
| ln fileB fileA                               | 建立硬链接，相当于一个文件存储在两个位置，可以有效防止误删                 |
| ----------------------------------------------------   | ------------------------------------------------------------------ |
| **删除指定文件夹下后缀名相同的文件**                   |                                                                    |
| ----------------------------------------------------   | ------------------------------------------------------------------ |
| find 目录 -name '*.abc' &#124; xargs rm                | 命令危险，可先执行前半段进行查看, 确认后再整条执行                 |
| find . -name '*.exe' -type f -print -exec rm -rf {} \; | 1) "."表示从当前目录开始递归查找                                   |
|                                                        | 2) “-name '*.exe'"根据名称来查找所有以.exe结尾的文件夹或者文件     |
|                                                        | 3) "-type f"查找的类型为文件                                       |
|                                                        | 4) "-print"输出查找的文件目录名                                    |
|                                                        | 5) "-exec"后边跟要执行的命令，表示将find出来的文件或目录执行该命令 |
|                                                        | 最后是一对{}，一个空格和一个\，一个分号                            |

---

### 网络
| 命令                                         | 说明                                                                       |
| ---------------                              | :---------------                                                           |
| netstat -apn                                 | 查看所有的进程和端口使用情况                                               |
| -------------------------------------------- | -------------------------------------------------------------------------- |

---

### vi
| 命令                                         | 说明                                                                       |
| ---------------                              | :---------------                                                           |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **进入vi**                                   |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| vi filename                                  | 打开或新建文件，并将光标置于第一行首                                       |
| vi +n filename                               | 打开文件，并将光标置于第n行首                                              |
| vi + filename                                | 打开文件，并将光标置于最后一行首                                           |
| vi +/pattern filename                        | 打开文件，并将光标置于第一个与pattern匹配的串处                            |
| vi -r filename                               | 在上次正用vi编辑时发生系统崩溃，恢复filename                               |
| vi filename....filename                      | 打开多个文件，依次进行编辑                                                 |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **保存退出**                                 |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| :                                            | 进入Last line mode                                                         |
| w                                            | 保存当前文件                                                               |
| w /tmp1                                      | 另存为/tmp1                                                                |
| 20,59w /tmp1                                 | 仅将20-59行之间的内存另存为/tmp1                                           |
| x 或 wq                                      | 保存并退出                                                                 |
| q                                            | 退出vi                                                                     |
| q!                                           | 退出不保存                                                                 |
| !command                                     | 执行shell命令command                                                       |
|n1,n2 w !command | 将文件中n1行至n2行的内容作为command的输入并执行之，若不指定n1，n2，则表示将整个文件内容作为command的输入|
| r !command                                   | 将命令command的输出结果放到当前行                                          |
| w !sudo tee %                                | 保存没权限时，可获取权限再保存                                             |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **光标移动**                                 |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| h                                            | 光标左移一个字符                                                           |
| Backspace                                    | 光标左移一个字符                                                           |
| l                                            | 光标右移一个字符                                                           |
| spac                                         | 光标右移一个字符                                                           |
| k 或 Ctrl+p                                  | 光标上移一行                                                               |
| j 或 Ctrl+n                                  | 光标下移一行                                                               |
| Enter                                        | 光标下移一行                                                               |
| w 或 W                                       | 光标右移一个字至字首                                                       |
| b 或 B                                       | 光标左移一个字至字首                                                       |
| e 或 E                                       | 光标右移一个字至字尾                                                       |
| )                                            | 光标移至句尾                                                               |
| (                                            | 光标移至句首                                                               |
| }                                            | 光标移至段落开头                                                           |
| {                                            | 光标移至段落结尾                                                           |
| nG                                           | 光标移至第n行首                                                            |
| n+                                           | 光标下移n行                                                                |
| n-                                           | 光标上移n行                                                                |
| n$                                           | 光标移至第n行尾                                                            |
| H                                            | 光标移至屏幕顶行                                                           |
| M                                            | 光标移至屏幕中间行                                                         |
| L                                            | 光标移至屏幕最后行                                                         |
| 0                                            | （注意是数字零）光标移至当前行首                                           |
| $                                            | 光标移至当前行尾                                                           |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **屏幕翻滚**                                 |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| Ctrl+u                                       | 向文件首翻半屏                                                             |
| Ctrl+d                                       | 向文件尾翻半屏                                                             |
| Ctrl+f                                       | 向文件尾翻一屏                                                             |
| Ctrl+b                                       | 向文件首翻一屏                                                             |
| nz                                           | 将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部                         |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **插入**                                     |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| i                                            | 在光标前                                                                   |
| I                                            | 在当前行首                                                                 |
| a                                            | 光标后                                                                     |
| A                                            | 在当前行尾                                                                 |
| o                                            | 在当前行之下新开一行                                                       |
| O                                            | 在当前行之上新开一行                                                       |
| r                                            | 替换当前字符                                                               |
| R                                            | 替换当前字符及其后的字符，直至按ESC键                                      |
| s                                            | 从当前光标位置处开始，以输入的文本替代指定数目的字符                       |
| S                                            | 删除指定数目的行，并以所输入文本代替之                                     |
| ncw 或 nCW                                   | 修改指定数目的字                                                           |
| nCC                                          | 修改指定数目的行                                                           |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **删除**                                     |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| ndw 或 ndW                                   | 删除光标处开始及其后的n-1个字                                              |
| do                                           | 删至行首                                                                   |
| d$                                           | 删至行尾                                                                   |
| ndd                                          | 删除当前行及其后n-1行                                                      |
| x 或 X                                       | 删除一个字符，x删除光标后的，而X删除光标前的                               |
| Ctrl+u                                       | 删除输入方式下所输入的文本                                                 |
| n1,n2 d                                      | 将n1行到n2行之间的内容删除                                                 |
| %d                                           | 删除全部内容                                                               |
| 1,$d                                         | 删除全部内容                                                               |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **复制粘贴、剪切、移动**                     |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| yy                                           | 复制当前行                                                                 |
| nyy                                          | 复制当前行开始的n行                                                        |
| 先按 v 然后方向键选择区域，按 y 复制选中行   | 复制选中行                                                                 |
| dd                                           | 剪切当前行                                                                 |
| p（小）                                      | 在当前光标处下面粘贴内容。                                                 |
| P（大）                                      | 在当前光标处上面粘贴内容                                                   |
| n1,n2 co n3                                  | 将n1行到n2行之间的内容拷贝到第n3行下                                       |
| n1,n2 m n3                                   | 将n1行到n2行之间的内容移至到第n3行下                                       |
| u                                            | 撤销上一步的操作                                                           |
| Ctrl+r                                       | 恢复上一步被撤销的操作                                                     |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **搜索（查找）**                             |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| /abc                                         | 从光标开始处向文件尾搜索abc                                                |
| ?abc                                         | 从光标开始处向文件首搜索abc                                                |
| /\/abc                                       | 从光标开始处向文件尾搜索/abc，其中\/是转义                                 |
| n                                            | 在同一方向重复上一次搜索命令                                               |
| N                                            | 在反方向上重复上一次搜索命令                                               |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **替换**                                     |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| s/vivian/sky/                                | 替换当前行第一个 vivian 为 sky                                             |
| s/vivian/sky/g                               | 替换当前行所有 vivian 为 sky                                               |
| n,$s/vivian/sky/                             | 替换第 n 行开始到最后一行中每一行的第一个 vivian 为 sky                    |
| n,$s/vivian/sky/g                            | 替换第 n 行开始到最后一行中每一行所有 vivian 为sky                         |
| %s/vivian/sky/g                              | （等同于 g/vivian/s//sky/） 替换每一行的每一个 vivian 为 sky               |
|s#vivian/#sky/#              | 替换当前行第一个 vivian/ 为 sky/（可以使用 #或+作为分隔符，此时中间出现的 / 不会作为分隔符）|
| s/p1/p2/g                                    | 将当前行中所有p1均用p2替代                                                 |
| n1,n2s/p1/p2/g                               | 将第n1至n2行中所有p1均用p2替代                                             |
| g/p1/s//p2/g                                 | 将文件中所有p1均用p2替换                                                   |
| -------------------------------------------- | --------------------------------------------------------------------------       |
| **寄存器**                                   |                                                                                  |
| -------------------------------------------- | --------------------------------------------------------------------------       |
| "?nyy                                        | 将当前行及其下n行的内容保存到寄存器？中，其中?为一个字母，n为一个数字            |
| "?nyw                                        | 将当前行及其下n个字保存到寄存器？中，其中?为一个字母，n为一个数字                |
| "?nyl                                        | 将当前行及其下n个字符保存到寄存器？中，其中?为一个字母，n为一个数字              |
| "?p                                          | 取出寄存器？中的内容并将其放到光标位置处。这里？可以是一个字母，也可以是一个数字 |
| ndd                                          | 将当前行及其下共n行文本删除，并将所删内容放到1号删除寄存器中。                   |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| **选项设置**                                 |                                                                            |
| -------------------------------------------- | -------------------------------------------------------------------------- |
| set number                                   | 显示行号                                                                   |
| set number!                                  | 不显示行号，其它选项同理加！号                                             |
| set all                                      | 列出所有选项设置情况                                                       |
| set term                                     | 设置终端类型                                                               |
| set ignorance                                | 在搜索中忽略大小写                                                         |
| set list                                     | 显示制表位(Ctrl+I)和行尾标志（$)                                           |
| set report                                   | 显示由面向行的命令修改过的数目                                             |
| set terse                                    | 显示简短的警告信息                                                         |
| set warn                                     | 在转到别的文件时若没保存当前文件则显示NO write信息                         |
| set nomagic                                  | 允许在搜索模式中，使用前面不带“\”的特殊字符                                |
| set nowrapscan                               | 禁止vi在搜索到达文件两端时，又从另一端开始                                 |
| set mesg                                     | 允许vi显示其他用户用write写到自己终端上的信息                              |
